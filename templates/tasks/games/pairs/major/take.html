<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Major Matching Game - CogniCare</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f6f9;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 900px;
      margin: auto;
      padding: 2rem;
    }
    .task-header {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    .stats-container {
      display: flex;
      justify-content: space-around;
      background: #e9ecef;
      padding: 1rem;
      border-radius: 10px;
      margin-bottom: 1.5rem;
    }
    .game-container {
      display: flex;
      justify-content: center;
    }
    .game-board {
      display: grid;
      gap: 12px;
      width: 100%;
    }
    .card {
      background: white;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      padding: 1rem;
      text-align: center;
      user-select: none;
      font-size: 2em;
    }
    .card.matched {
      background: #28a745;
      color: white;
    }
    .card-back {
      background: #dee2e6;
      color: #6c757d;
      border-radius: 10px;
      padding: 1rem;
      width: 100%;
      text-align: center;
    }
    .preview-overlay {
      position: fixed;
      top: 0; left: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .preview-content {
      background: white;
      padding: 2rem 3rem;
      border-radius: 12px;
      text-align: center;
      font-size: 2em;
      box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    }
    .victory-modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 999;
    }
    .victory-content {
      background: white;
      padding: 2rem;
      border-radius: 10px;
      text-align: center;
      max-width: 300px;
      margin: 10% auto;
    }
  </style>
</head>
<body>
<div class="container">
  <div class="task-header">
    <h1>🧠 Major Matching Game</h1>
    <p>Match emoji + word cards — cards stay open!</p>
  </div>
  <div class="stats-container">
    <div>Moves: <span id="moves">0</span></div>
    <div>Matches: <span id="matches">0</span></div>
    <div>Time: <span id="time">00:00</span></div>
  </div>
  <div class="game-container">
    <div class="game-board" id="gameBoard"></div>
  </div>
  <div class="preview-overlay" id="previewOverlay">
    <div class="preview-content">
      Get ready!<br>
      <span id="previewCountdown">7</span>
    </div>
  </div>
  <div class="victory-modal" id="victory">
    <div class="victory-content">
      <h2>🎉 You did it!</h2>
      <p>Moves: <span id="finalMoves"></span></p>
      <p>Time: <span id="finalTime"></span></p>
      <button onclick="initializeGame()">Play Again</button>
    </div>
  </div>
</div>
<script>
const allPairs = [
  { id: 1, emoji: '🐶', word: 'Dog' }, { id: 1, emoji: '🐱', word: 'Cat' },
  { id: 2, emoji: '🍎', word: 'Apple' }, { id: 2, emoji: '🍌', word: 'Banana' },
  { id: 3, emoji: '🌞', word: 'Sun' }, { id: 3, emoji: '🌙', word: 'Moon' },
  { id: 4, emoji: '🔥', word: 'Fire' }, { id: 4, emoji: '💧', word: 'Water' },
  { id: 5, emoji: '⚡', word: 'Lightning' }, { id: 5, emoji: '☁️', word: 'Cloud' },
  { id: 6, emoji: '🏠', word: 'House' }, { id: 6, emoji: '🏢', word: 'Building' },
  { id: 7, emoji: '📚', word: 'Book' }, { id: 7, emoji: '✏️', word: 'Pencil' },
  { id: 8, emoji: '🎵', word: 'Music' }, { id: 8, emoji: '🎤', word: 'Microphone' }
];

let state;
let previewTimer;
let previewCountdown = 7;

function initializeGame() {
  const pairCount = 8;
  let selected = allPairs.slice(0, pairCount);
  let cards = [];
  selected.forEach(pair => {
    cards.push({ id: pair.id, emoji: pair.emoji, word: pair.word, matched: false });
    cards.push({ id: pair.id, emoji: pair.emoji, word: pair.word, matched: false });
  });
  cards = cards.sort(() => Math.random() - 0.5);
  state = { cards, flipped: [], matched: 0, moves: 0, startTime: null, timer: null, preview: true };
  renderGame(); // All cards always visible
  updateStats();
  document.getElementById('previewOverlay').style.display = 'flex';
  previewCountdown = 7;
  document.getElementById('previewCountdown').textContent = previewCountdown;
  clearInterval(state.timer);
  clearInterval(previewTimer);
  previewTimer = setInterval(() => {
    previewCountdown--;
    document.getElementById('previewCountdown').textContent = previewCountdown;
    if (previewCountdown === 0) {
      clearInterval(previewTimer);
      document.getElementById('previewOverlay').style.display = 'none';
      state.preview = false;
      state.startTime = Date.now();
      state.timer = setInterval(updateTimer, 1000);
    }
  }, 1000);
}

function renderGame() {
  const board = document.getElementById('gameBoard');
  const cols = state.cards.length / 4;
  board.style.gridTemplateColumns = `repeat(${Math.floor(cols)}, 1fr)`;
  board.innerHTML = '';
  state.cards.forEach((card, index) => {
    const el = document.createElement('div');
    el.className = 'card';
    el.innerHTML = `<div>${card.emoji}</div><div style="font-size: 0.5em;">${card.word}</div>`;
    if (card.matched) el.classList.add('matched');
    board.appendChild(el);
  });
}

function flipCard(index) {
  if (state.preview || state.cards[index].matched) return;
  // In major, cards are always visible, so no flip logic needed
}

function updateStats() {
  document.getElementById('moves').textContent = state.moves;
  document.getElementById('matches').textContent = state.matched;
}

function updateTimer() {
  const elapsed = Math.floor((Date.now() - state.startTime) / 1000);
  const min = String(Math.floor(elapsed / 60)).padStart(2, '0');
  const sec = String(elapsed % 60).padStart(2, '0');
  document.getElementById('time').textContent = `${min}:${sec}`;
}

function endGame() {
  clearInterval(state.timer);
  document.getElementById('finalMoves').textContent = state.moves;
  document.getElementById('finalTime').textContent = document.getElementById('time').textContent;
  document.getElementById('victory').style.display = 'block';
}

initializeGame();
</script>
</body>
</html>
